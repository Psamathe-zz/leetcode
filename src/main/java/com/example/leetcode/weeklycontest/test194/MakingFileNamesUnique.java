package com.example.leetcode.weeklycontest.test194;

import java.util.*;

/**
 * Given an array of strings names of size n. You will create n folders in your file system such that, at the ith minute, you will create a folder with the name names[i].
 *
 * Since two files cannot have the same name, if you enter a folder name which is previously used, the system will have a suffix addition to its name in the form of (k), where, k is the smallest positive integer such that the obtained name remains unique.
 *
 * Return an array of strings of length n where ans[i] is the actual name the system will assign to the ith folder when you create it.
 *
 *
 *
 * Example 1:
 *
 * Input: names = ["pes","fifa","gta","pes(2019)"]
 * Output: ["pes","fifa","gta","pes(2019)"]
 * Explanation: Let's see how the file system creates folder names:
 * "pes" --> not assigned before, remains "pes"
 * "fifa" --> not assigned before, remains "fifa"
 * "gta" --> not assigned before, remains "gta"
 * "pes(2019)" --> not assigned before, remains "pes(2019)"
 * Example 2:
 *
 * Input: names = ["gta","gta(1)","gta","avalon"]
 * Output: ["gta","gta(1)","gta(2)","avalon"]
 * Explanation: Let's see how the file system creates folder names:
 * "gta" --> not assigned before, remains "gta"
 * "gta(1)" --> not assigned before, remains "gta(1)"
 * "gta" --> the name is reserved, system adds (k), since "gta(1)" is also reserved, systems put k = 2. it becomes "gta(2)"
 * "avalon" --> not assigned before, remains "avalon"
 * Example 3:
 *
 * Input: names = ["onepiece","onepiece(1)","onepiece(2)","onepiece(3)","onepiece"]
 * Output: ["onepiece","onepiece(1)","onepiece(2)","onepiece(3)","onepiece(4)"]
 * Explanation: When the last folder is created, the smallest positive valid k is 4, and it becomes "onepiece(4)".
 * Example 4:
 *
 * Input: names = ["wano","wano","wano","wano"]
 * Output: ["wano","wano(1)","wano(2)","wano(3)"]
 * Explanation: Just increase the value of k each time you create folder "wano".
 * Example 5:
 *
 * Input: names = ["kaido","kaido(1)","kaido","kaido(1)"]
 * Output: ["kaido","kaido(1)","kaido(2)","kaido(1)(1)"]
 * Explanation: Please note that system adds the suffix (k) to current name even it contained the same suffix before.
 *
 *
 * Constraints:
 *
 * 1 <= names.length <= 5 * 10^4
 * 1 <= names[i].length <= 20
 * names[i] consists of lower case English letters, digits and/or round brackets.*
 *
 * ["gta","gta(1)","gta","avalon"]
 * ["m","t","y(4)","t","a","p","h","h","z","z(2)(2)","x(3)","h(4)(3)","l","z(1)","h","s(1)(2)","y(3)(2)","m(3)","i","h","u","j(1)(4)","q","j(1)","c","n(4)","k","s(1)(4)","p(2)","m","r(1)(4)","k(3)","d(3)(1)","e(4)"]
 * ["m","t","y(4)","t(1)","a","p","h","h(1)","z","z(2)(2)","x(3)","h(4)(3)","l","z(1)","h(2)","s(1)(2)","y(3)(2)","m(3)","i","h(3)","u","j(1)(4)","q","j(1)","c","n(4)","k","s(1)(4)","p(2)","m(2)","r(1)(4)","k(3)","d(3)(1)","e(4)"]
 * ["m","t","y(4)","t(1)","a","p","h","h(1)","z","z(2)(2)","x(3)","h(4)(3)","l","z(1)","h(2)","s(1)(2)","y(3)(2)","m(3)","i","h(3)","u","j(1)(4)","q","j(1)","c","n(4)","k","s(1)(4)","p(2)","m(1)","r(1)(4)","k(3)","d(3)(1)","e(4)"]
 *
 * ["v(1)","r","k","e","h(3)","t","b(1)","s(4)","n(1)(4)","u(2)(4)","c(1)","v(4)(4)","f","m","y","w","p","n","j","i","z","b","h","r","w","j","i","h(4)","f","u(1)","c","k","t(2)(4)","m","o(3)","s","e","m(3)(4)","q","h(1)(3)","f","w","t","w","u(1)(2)","j","k","k","n","a","b","v"]
 * ["v(1)","r","k","e","h(3)","t","b(1)","s(4)","n(1)(4)","u(2)(4)","c(1)","v(4)(4)","f","m","y","w","p","n","j","i","z","b","h","r(1)","w(1)","j(1)","i(1)","h(4)","f(1)","u(1)","c","k(1)","t(2)(4)","m(1)","o(3)","s","e(1)","m(3)(4)","q","h(1)(3)","f(2)","w(2)","t(1)","w(3)","u(1)(2)","j(2)","k(2)","k(3)","n(1)","a","b(1)","v"]
 * ["v(1)","r","k","e","h(3)","t","b(1)","s(4)","n(1)(4)","u(2)(4)","c(1)","v(4)(4)","f","m","y","w","p","n","j","i","z","b","h","r(1)","w(1)","j(1)","i(1)","h(4)","f(1)","u(1)","c","k(1)","t(2)(4)","m(1)","o(3)","s","e(1)","m(3)(4)","q","h(1)(3)","f(2)","w(2)","t(1)","w(3)","u(1)(2)","j(2)","k(2)","k(3)","n(1)","a","b(2)","v"]
 *
 * ["l","p(4)(4)","v","c","i","k(2)","y","a(4)(2)","t","a","e","e(1)(4)","p","p","s","z","s","q(2)(1)","r(1)","m","b(3)","u(2)","j","p","t","s","g","o","o","b(3)(3)","k","w(2)(3)","q","a","z","t(4)(4)","s(2)","c","w","u","h","g","b","r","c(1)","v","n(1)","r(2)(1)","u","t(2)(3)","p","m(3)(1)","h","o","y","n","s","z","k(2)","x(4)","l(1)(4)","g(2)","u","t(2)","m","c","t","g","c","a(2)","r","d","y","b","p","m","w(2)(4)","v","t(4)(2)","x","e(4)(1)","h","f","z","e(1)(4)","t","b(1)","x(4)","m(3)","j(2)(4)","s(3)(2)","z","l","p(2)(2)","g(3)(2)","q(1)(4)","h(1)(1)","h","o(3)","h","f","n(4)","s(4)","g","s","r","n(1)(1)","x(3)","r","f(3)(1)","e","j","s","g","d","l","g","o(4)(3)","x(4)","u(2)(4)","x","t","f","j(1)","v(2)","w","v","t(2)(2)","l","o(1)(1)","a","y","q(4)","m(1)(2)","i","u","l","c(1)","g","l(2)","p(1)(1)","k","d","l","o","m","i(1)","j","i","f","y","b","k","z","n","t","c(2)","y","q","b","t","m","g(1)","r","m","l","s","n","j(4)(4)","m(3)(3)","n","n(2)(3)","s","t","l","e","p","q(2)","v","v","b","w","m","p","g","h(2)","n(1)","q","x(4)","q(2)(4)","s(2)","w","k","f","v","n","q","w","y(3)","a(4)(1)","r(1)","r","f(4)(2)","l","f(2)(3)","p","o","h","t","i","r","k","p","l","o(3)(4)","f(1)","j(4)","f(3)(4)","o(2)(1)","j","k(2)","k","x(4)","s(3)(4)","p(1)(3)","y","r(2)","i(3)(4)","j","p(4)(3)","e","j(4)","g(4)(2)","x","l","x","g","w","o","t(2)(4)","s","f","o","h","h(2)(4)","z(4)(2)","w","l","n","q","w","l","a","o","v","h","b","v","b","k","x(2)","r(2)(1)","g(2)","c(4)(3)","w(1)","g(4)","z","i(3)(2)","r","e","p","z(4)(2)","s","c(1)","h","l","j(3)(4)","x(1)(2)","a","b","t","c"]
 * ["l","p(4)(4)","v","c","i","k(2)","y","a(4)(2)","t","a","e","e(1)(4)","p","p(1)","s","z","s(1)","q(2)(1)","r(1)","m","b(3)","u(2)","j","p(2)","t(1)","s(2)","g","o","o(1)","b(3)(3)","k","w(2)(3)","q","a(1)","z(1)","t(4)(4)","s(2)(1)","c(1)","w","u","h","g(1)","b","r","c(1)(1)","v(1)","n(1)","r(2)(1)","u(1)","t(2)(3)","p(3)","m(3)(1)","h(1)","o(2)","y(1)","n","s(3)","z(2)","k(2)(1)","x(4)","l(1)(4)","g(2)","u(3)","t(2)","m(1)","c(2)","t(2)","g(3)","c(3)","a(2)","r(2)","d","y(2)","b(1)","p(4)","m(2)","w(2)(4)","v(2)","t(4)(2)","x","e(4)(1)","h(2)","f","z(3)","e(1)(4)(1)","t(3)","b(1)(1)","x(4)(1)","m(3)","j(2)(4)","s(3)(2)","z(4)","l(1)","p(2)(2)","g(3)(2)","q(1)(4)","h(1)(1)","h(3)","o(3)","h(4)","f(1)","n(4)","s(4)","g(4)","s(5)","r(3)","n(1)(1)","x(3)","r(4)","f(3)(1)","e(1)","j(1)","s(6)","g(5)","d(1)","l(2)","g(6)","o(4)(3)","x(4)(2)","u(2)(4)","x(1)","t(4)","f(2)","j(1)(1)","v(2)(1)","w(1)","v(3)","t(2)(2)","l(3)","o(1)(1)","a(3)","y(3)","q(4)","m(1)(2)","i(1)","u(4)","l(4)","c(1)(2)","g(7)","l(2)(1)","p(1)(1)","k(1)","d(2)","l(5)","o(4)","m(3)","i(1)(1)","j(2)","i(2)","f(3)","y(4)","b(2)","k(3)","z(5)","n(2)","t(5)","c(2)(1)","y(5)","q(1)","b(4)","t(6)","m(4)","g(1)(1)","r(5)","m(5)","l(6)","s(7)","n(3)","j(4)(4)","m(3)(3)","n(5)","n(2)(3)","s(8)","t(7)","l(7)","e(2)","p(5)","q(2)","v(4)","v(5)","b(5)","w(2)","m(6)","p(6)","g(8)","h(2)(1)","n(1)(2)","q(2)","x(4)(3)","q(2)(4)","s(2)(2)","w(3)","k(4)","f(4)","v(6)","n(6)","q(3)","w(4)","y(3)(1)","a(4)(1)","r(1)(1)","r(6)","f(4)(2)","l(8)","f(2)(3)","p(7)","o(5)","h(5)","t(8)","i(3)","r(7)","k(5)","p(8)","l(9)","o(3)(4)","f(1)(1)","j(4)","f(3)(4)","o(2)(1)","j(3)","k(2)(2)","k(6)","x(4)(4)","s(3)(4)","p(1)(3)","y(6)","r(2)(1)","i(3)(4)","j(4)","p(4)(3)","e(3)","j(4)(1)","g(4)(2)","x(2)","l(10)","x(5)","g(9)","w(5)","o(6)","t(2)(4)","s(9)","f(5)","o(7)","h(6)","h(2)(4)","z(4)(2)","w(6)","l(11)","n(7)","q(5)","w(7)","l(12)","a(4)","o(8)","v(7)","h(7)","b(6)","v(8)","b(7)","k(7)","x(2)(1)","r(2)(1)(1)","g(2)(1)","c(4)(3)","w(1)(1)","g(4)(1)","z(6)","i(3)(2)","r(8)","e(4)","p(9)","z(4)(2)(1)","s(10)","c(1)(3)","h(8)","l(13)","j(3)(4)","x(1)(2)","a(5)","b(8)","t(9)","c(4)"]
 * ["l","p(4)(4)","v","c","i","k(2)","y","a(4)(2)","t","a","e","e(1)(4)","p","p(1)","s","z","s(1)","q(2)(1)","r(1)","m","b(3)","u(2)","j","p(2)","t(1)","s(2)","g","o","o(1)","b(3)(3)","k","w(2)(3)","q","a(1)","z(1)","t(4)(4)","s(2)(1)","c(1)","w","u","h","g(1)","b","r","c(1)(1)","v(1)","n(1)","r(2)(1)","u(1)","t(2)(3)","p(3)","m(3)(1)","h(1)","o(2)","y(1)","n","s(3)","z(2)","k(2)(1)","x(4)","l(1)(4)","g(2)","u(3)","t(2)","m(1)","c(2)","t(3)","g(3)","c(3)","a(2)","r(2)","d","y(2)","b(1)","p(4)","m(2)","w(2)(4)","v(2)","t(4)(2)","x","e(4)(1)","h(2)","f","z(3)","e(1)(4)(1)","t(4)","b(1)(1)","x(4)(1)","m(3)","j(2)(4)","s(3)(2)","z(4)","l(1)","p(2)(2)","g(3)(2)","q(1)(4)","h(1)(1)","h(3)","o(3)","h(4)","f(1)","n(4)","s(4)","g(4)","s(5)","r(3)","n(1)(1)","x(3)","r(4)","f(3)(1)","e(1)","j(1)","s(6)","g(5)","d(1)","l(2)","g(6)","o(4)(3)","x(4)(2)","u(2)(4)","x(1)","t(5)","f(2)","j(1)(1)","v(2)(1)","w(1)","v(3)","t(2)(2)","l(3)","o(1)(1)","a(3)","y(3)","q(4)","m(1)(2)","i(1)","u(4)","l(4)","c(1)(2)","g(7)","l(2)(1)","p(1)(1)","k(1)","d(2)","l(5)","o(4)","m(4)","i(1)(1)","j(2)","i(2)","f(3)","y(4)","b(2)","k(3)","z(5)","n(2)","t(6)","c(2)(1)","y(5)","q(1)","b(4)","t(7)","m(5)","g(1)(1)","r(5)","m(6)","l(6)","s(7)","n(3)","j(4)(4)","m(3)(3)","n(5)","n(2)(3)","s(8)","t(8)","l(7)","e(2)","p(5)","q(2)","v(4)","v(5)","b(5)","w(2)","m(7)","p(6)","g(8)","h(2)(1)","n(1)(2)","q(3)","x(4)(3)","q(2)(4)","s(2)(2)","w(3)","k(4)","f(4)","v(6)","n(6)","q(5)","w(4)","y(3)(1)","a(4)(1)","r(1)(1)","r(6)","f(4)(2)","l(8)","f(2)(3)","p(7)","o(5)","h(5)","t(9)","i(3)","r(7)","k(5)","p(8)","l(9)","o(3)(4)","f(1)(1)","j(4)","f(3)(4)","o(2)(1)","j(3)","k(2)(2)","k(6)","x(4)(4)","s(3)(4)","p(1)(3)","y(6)","r(2)(2)","i(3)(4)","j(5)","p(4)(3)","e(3)","j(4)(1)","g(4)(2)","x(2)","l(10)","x(5)","g(9)","w(5)","o(6)","t(2)(4)","s(9)","f(5)","o(7)","h(6)","h(2)(4)","z(4)(2)","w(6)","l(11)","n(7)","q(6)","w(7)","l(12)","a(4)","o(8)","v(7)","h(7)","b(6)","v(8)","b(7)","k(7)","x(2)(1)","r(2)(1)(1)","g(2)(1)","c(4)(3)","w(1)(1)","g(4)(1)","z(6)","i(3)(2)","r(8)","e(4)","p(9)","z(4)(2)(1)","s(10)","c(1)(3)","h(8)","l(13)","j(3)(4)","x(1)(2)","a(5)","b(8)","t(10)","c(4)"]
 *
 * */
public class MakingFileNamesUnique {
    public static void main(String[] args) {
        String[] names = new String[]{"l","p(4)(4)","v","c","i","k(2)","y","a(4)(2)","t","a","e","e(1)(4)","p","p","s","z","s","q(2)(1)","r(1)","m","b(3)","u(2)","j","p","t","s","g","o","o","b(3)(3)","k","w(2)(3)","q","a","z","t(4)(4)","s(2)","c","w","u","h","g","b","r","c(1)","v","n(1)","r(2)(1)","u","t(2)(3)","p","m(3)(1)","h","o","y","n","s","z","k(2)","x(4)","l(1)(4)","g(2)","u","t(2)","m","c","t","g","c","a(2)","r","d","y","b","p","m","w(2)(4)","v","t(4)(2)","x","e(4)(1)","h","f","z","e(1)(4)","t","b(1)","x(4)","m(3)","j(2)(4)","s(3)(2)","z","l","p(2)(2)","g(3)(2)","q(1)(4)","h(1)(1)","h","o(3)","h","f","n(4)","s(4)","g","s","r","n(1)(1)","x(3)","r","f(3)(1)","e","j","s","g","d","l","g","o(4)(3)","x(4)","u(2)(4)","x","t","f","j(1)","v(2)","w","v","t(2)(2)","l","o(1)(1)","a","y","q(4)","m(1)(2)","i","u","l","c(1)","g","l(2)","p(1)(1)","k","d","l","o","m","i(1)","j","i","f","y","b","k","z","n","t","c(2)","y","q","b","t","m","g(1)","r","m","l","s","n","j(4)(4)","m(3)(3)","n","n(2)(3)","s","t","l","e","p","q(2)","v","v","b","w","m","p","g","h(2)","n(1)","q","x(4)","q(2)(4)","s(2)","w","k","f","v","n","q","w","y(3)","a(4)(1)","r(1)","r","f(4)(2)","l","f(2)(3)","p","o","h","t","i","r","k","p","l","o(3)(4)","f(1)","j(4)","f(3)(4)","o(2)(1)","j","k(2)","k","x(4)","s(3)(4)","p(1)(3)","y","r(2)","i(3)(4)","j","p(4)(3)","e","j(4)","g(4)(2)","x","l","x","g","w","o","t(2)(4)","s","f","o","h","h(2)(4)","z(4)(2)","w","l","n","q","w","l","a","o","v","h","b","v","b","k","x(2)","r(2)(1)","g(2)","c(4)(3)","w(1)","g(4)","z","i(3)(2)","r","e","p","z(4)(2)","s","c(1)","h","l","j(3)(4)","x(1)(2)","a","b","t","c"};
        MakingFileNamesUnique makingFileNamesUnique = new MakingFileNamesUnique();
        String[] result = makingFileNamesUnique.getFolderNames(names);
        String[] wantedResult = new String[]{"l","p(4)(4)","v","c","i","k(2)","y","a(4)(2)","t","a","e","e(1)(4)","p","p(1)","s","z","s(1)","q(2)(1)","r(1)","m","b(3)","u(2)","j","p(2)","t(1)","s(2)","g","o","o(1)","b(3)(3)","k","w(2)(3)","q","a(1)","z(1)","t(4)(4)","s(2)(1)","c(1)","w","u","h","g(1)","b","r","c(1)(1)","v(1)","n(1)","r(2)(1)","u(1)","t(2)(3)","p(3)","m(3)(1)","h(1)","o(2)","y(1)","n","s(3)","z(2)","k(2)(1)","x(4)","l(1)(4)","g(2)","u(3)","t(2)","m(1)","c(2)","t(3)","g(3)","c(3)","a(2)","r(2)","d","y(2)","b(1)","p(4)","m(2)","w(2)(4)","v(2)","t(4)(2)","x","e(4)(1)","h(2)","f","z(3)","e(1)(4)(1)","t(4)","b(1)(1)","x(4)(1)","m(3)","j(2)(4)","s(3)(2)","z(4)","l(1)","p(2)(2)","g(3)(2)","q(1)(4)","h(1)(1)","h(3)","o(3)","h(4)","f(1)","n(4)","s(4)","g(4)","s(5)","r(3)","n(1)(1)","x(3)","r(4)","f(3)(1)","e(1)","j(1)","s(6)","g(5)","d(1)","l(2)","g(6)","o(4)(3)","x(4)(2)","u(2)(4)","x(1)","t(5)","f(2)","j(1)(1)","v(2)(1)","w(1)","v(3)","t(2)(2)","l(3)","o(1)(1)","a(3)","y(3)","q(4)","m(1)(2)","i(1)","u(4)","l(4)","c(1)(2)","g(7)","l(2)(1)","p(1)(1)","k(1)","d(2)","l(5)","o(4)","m(4)","i(1)(1)","j(2)","i(2)","f(3)","y(4)","b(2)","k(3)","z(5)","n(2)","t(6)","c(2)(1)","y(5)","q(1)","b(4)","t(7)","m(5)","g(1)(1)","r(5)","m(6)","l(6)","s(7)","n(3)","j(4)(4)","m(3)(3)","n(5)","n(2)(3)","s(8)","t(8)","l(7)","e(2)","p(5)","q(2)","v(4)","v(5)","b(5)","w(2)","m(7)","p(6)","g(8)","h(2)(1)","n(1)(2)","q(3)","x(4)(3)","q(2)(4)","s(2)(2)","w(3)","k(4)","f(4)","v(6)","n(6)","q(5)","w(4)","y(3)(1)","a(4)(1)","r(1)(1)","r(6)","f(4)(2)","l(8)","f(2)(3)","p(7)","o(5)","h(5)","t(9)","i(3)","r(7)","k(5)","p(8)","l(9)","o(3)(4)","f(1)(1)","j(4)","f(3)(4)","o(2)(1)","j(3)","k(2)(2)","k(6)","x(4)(4)","s(3)(4)","p(1)(3)","y(6)","r(2)(2)","i(3)(4)","j(5)","p(4)(3)","e(3)","j(4)(1)","g(4)(2)","x(2)","l(10)","x(5)","g(9)","w(5)","o(6)","t(2)(4)","s(9)","f(5)","o(7)","h(6)","h(2)(4)","z(4)(2)","w(6)","l(11)","n(7)","q(6)","w(7)","l(12)","a(4)","o(8)","v(7)","h(7)","b(6)","v(8)","b(7)","k(7)","x(2)(1)","r(2)(1)(1)","g(2)(1)","c(4)(3)","w(1)(1)","g(4)(1)","z(6)","i(3)(2)","r(8)","e(4)","p(9)","z(4)(2)(1)","s(10)","c(1)(3)","h(8)","l(13)","j(3)(4)","x(1)(2)","a(5)","b(8)","t(10)","c(4)"};
        for (int i = 0; i < result.length; i++) {
            if(!result[i].equals(wantedResult[i])){
                System.out.println(result[i]);
                System.out.println(wantedResult[i]);
                System.out.println(i);
            }
        }
        System.out.println(result);
    }
    public String[] getFolderNames(String[] names) {
        Map<String,Integer> count = new HashMap<>();
        List<String> result = new ArrayList<>();
        for (String name : names) {
            String unique_name = name;
            if(count.containsKey(name)){
                int j = count.get(name);
                while (count.containsKey(unique_name = name + "(" + (j) + ")")){
                    j++;
                }
                count.put(name,j);
            }

            count.put(unique_name,1);
            result.add(unique_name);
        }
        return result.toArray(new String[0]);
    }

    public String[] getFolderNamesV2(String[] names) {
        Map<String, Integer> lastUsed = new HashMap<>();
        Set<String> seen = new HashSet<>();
        String[] ans = new String[names.length];
        for (int i = 0; i < ans.length; i++) {
            if (lastUsed.containsKey(names[i]) || seen.contains(names[i])) {
                int x = lastUsed.getOrDefault(names[i], 0) + 1;
                while (seen.contains(names[i] + "(" + x + ")"))
                    x++;
                ans[i] = names[i] + "(" + x + ")";
                lastUsed.put(names[i], x);
                seen.add(ans[i]);
            } else {
                ans[i] = names[i];
                lastUsed.put(names[i], 0);
                seen.add(ans[i]);
            }
        }
        return ans;
    }

}
